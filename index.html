<!DOCTYPE html>

<!-- ==========================================================
  Project: MOYAMOVA
  File: index.html
  Purpose: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  Version: 1.0
  Last modified: 2025-10-19
-->
<html lang="uk">
<head>
<meta content="no-cache, no-store, must-revalidate" http-equiv="Cache-Control"/>
<meta content="no-cache" http-equiv="Pragma"/>
<meta content="0" http-equiv="Expires"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" name="viewport"/>
<title>MOYAMOVA</title>
<link href="./apple-touch-icon-180x180.png?v=1.0" rel="apple-touch-icon" sizes="180x180"/>
<link href="./apple-touch-icon-152x152.png?v=1.0" rel="apple-touch-icon" sizes="152x152"/>
<link href="./apple-touch-icon-120x120.png?v=1.0" rel="apple-touch-icon" sizes="120x120"/>
<link href="./apple-touch-icon-76x76.png?v=1.0" rel="apple-touch-icon" sizes="76x76"/>
<link href="./favicon-192x192.png?v=1.0" rel="icon" sizes="192x192" type="image/png"/>
<link href="./favicon-512x512.png?v=1.0" rel="icon" sizes="512x512" type="image/png"/>
<link href="./favicon-256x256.png?v=1.0" rel="icon" sizes="256x256" type="image/png"/>
<link href="./favicon-192x192.png?v=1.0" rel="icon" sizes="192x192" type="image/png"/>
<link href="./favicon-128x128.png?v=1.0" rel="icon" sizes="128x128" type="image/png"/>
<link href="./favicon-48x48.png?v=1.0" rel="icon" sizes="48x48" type="image/png"/>
<link href="./favicon-16x16.png?v=1.0" rel="icon" sizes="16x16" type="image/png"/>
<link href="./favicon-512x512.png?v=1.0" rel="icon" sizes="512x512" type="image/png"/>
<link href="./favicon-128x128.png?v=1.0" rel="icon" sizes="128x128" type="image/png"/>
<link href="./favicon-32x32.png?v=1.0" rel="icon" sizes="32x32" type="image/png"/>
<link href="./favicon-32x32.png?v=1.0" rel="icon" sizes="32x32" type="image/png"/>
<link href="./favicon.ico?v=1.0" rel="icon" type="image/x-icon"/>
<link href="./favicon-512x512.png?v=1.0" rel="icon" sizes="512x512"/>
<link href="./site.webmanifest?v=1.0" rel="manifest"/>
<meta content="yes" name="mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="MOYAMOVA" name="apple-mobile-web-app-title"/>
<link href="tokens.css" rel="stylesheet"/>
<link href="base.css" rel="stylesheet"/>
<link href="components.css" rel="stylesheet"/>
<link href="modals.css" rel="stylesheet"/>
<link href="states.css" rel="stylesheet"/>
<link href="overrides.css" rel="stylesheet"/>
<!-- split injected -->
<!-- ============================ SOCIAL PREVIEW ============================ -->
<meta content="website" property="og:type"/>
<meta content="MOYAMOVA ¬∑ —É—á–∏—Ç–µ —Å–ª–æ–≤–∞ –ª–µ–≥–∫–æ" property="og:title"/>
<meta content="–ö–∞—Ä—Ç–æ—á–∫–∏, –±—ã—Å—Ç—Ä—ã–µ —Å–µ—Å—Å–∏–∏, –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞. –£—á–∏—Ç–µ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏." property="og:description"/>
<meta content="./og-image.png?v=1.0" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="MOYAMOVA ¬∑ —É—á–∏—Ç–µ —Å–ª–æ–≤–∞ –ª–µ–≥–∫–æ" name="twitter:title"/>
<meta content="–ö–∞—Ä—Ç–æ—á–∫–∏, –±—ã—Å—Ç—Ä—ã–µ —Å–µ—Å—Å–∏–∏, –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞. –£—á–∏—Ç–µ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏." name="twitter:description"/>
<meta content="./og-image.png?v=1.0" name="twitter:image"/>
<style id="modal-inline-fix-1.6.3-1758932002">
/* Critical inline for iOS cache issues ‚Äî v1.6.5-1758932002 */
.modal .modalHeader{display:flex!important;align-items:center!important;justify-content:space-between!important;padding:14px 14px!important;border-bottom:none!important;font-size:20px!important;font-weight:700!important;line-height:1.2!important}
.modal .iconBtn.small{width:32px!important;height:32px!important;display:inline-flex!important;align-items:center!important;justify-content:center!important;font-size:18px!important;border-radius:8px!important;background:transparent!important;border:1px solid rgba(255,255,255,.08)!important;opacity:.9!important}
#modal .modalBody{padding-bottom:0px!important}
#modal .dictList{padding-bottom:14px!important}
#modal .dictList > *:last-child{margin-bottom:8px!important}
</style>
<style id="dicts-modal-fix">#modal .modalHeader{border-bottom:none!important}</style>
<link href="./tokens.css?v=1.0" rel="stylesheet"/>
<link href="./base.css?v=1.0" rel="stylesheet"/>
<link href="./components.css?v=1.0" rel="stylesheet"/>
<link href="./modals.css?v=1.0" rel="stylesheet"/>
<link href="./states.css?v=1.0" rel="stylesheet"/>
<link href="./overrides.css?v=1.0" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&amp;display=swap" rel="stylesheet"/><style>
/* overrides: brand font and larger header logo */
.header .logo img, header .logo img, .navbar .logo img, .site-header .logo img { height: 36px !important; width: auto !important; }
.navbar-brand, .site-title, .brand, header .title, .app-name {
  font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif !important;
  font-weight: 700 !important;
  letter-spacing: 0.2px;
}
header .tagline, .site-header .tagline, .subtitle, .slogan { display: none !important; }
</style></head>
<body>
<header>
<div class="brand">
<img alt="MOYAMOVA" class="logo-mark" decoding="async" height="28" loading="eager" src="./favicon-32x32.png?v=1.0" srcset="./logo_64.png?v=1.0 2x, ./favicon-128x128.png?v=1.0 4x, ./logo_256.png?v=1.0 8x" width="28"/>
<div class="title-wrap">
<h1 id="title">MOYAMOVA</h1>

</div>
</div>
<div class="sectionDivider settingsDividerBelowToggle"></div>
<div class="controls">
<button aria-label="–¢–µ–º–∞" class="iconBtn" data-title-key="tt_ui_theme" id="themeToggleBtn">üåû</button>
<button aria-label="–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞" class="iconBtn" data-title-key="tt_ui_lang" id="langToggleBtn">üá∫üá¶</button>
<button aria-label="–°–ª–æ–≤–∞—Ä–∏" class="iconBtn gear" data-title-key="tt_dicts" id="dictsBtn">üìö</button>
</div>
</header>
<details class="dictSpoiler" id="dictSpoiler">
<summary><span class="flag" id="dictFlag">üìö</span><span class="name" id="dictTitleInSpoiler">‚Äî</span></summary>
<div id="setControls">
<div aria-label="Sets" class="setsBar" id="setsBar"></div>
<div aria-live="polite" class="setStats statsBar" id="setStats"></div>
</div>
</details>
<main>
<section class="card">
<div class="topRow">
<div class="stars" id="stars"></div>
<button aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" class="heart" data-title-key="tt_favorites" id="favBtn">‚ô°</button>
</div>
<div class="word" id="wordText">‚Äî</div>
<div class="hint" id="hintText">‚Äî</div>
<div class="options" id="optionsRow"></div>
<div class="statsBar" id="statsBar">
        –í—Å–µ–≥–æ —Å–ª–æ–≤: 0 / –ò–∑—É—á–µ–Ω–Ω–æ: 0 / –û—à–∏–±–æ–∫: 0
      </div>
</section>
<div aria-label="Extra actions" class="extraActions">
<button aria-label="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" class="iconBtn" data-title-key="tt_help" id="btnInfo">‚ÑπÔ∏è</button>
<button aria-label="–ü–æ–¥–¥–µ—Ä–∂–∫–∞" class="iconBtn" data-title-key="tt_support" id="btnDonate">üí∞</button>
<button aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" class="iconBtn" data-title-key="tt_settings" id="btnSettings">‚öôÔ∏è</button>
</div>
<!-- Info modal with footer OK in same style as Dicts modal -->
<!-- Settings modal (same structure as Info) -->
<div aria-labelledby="settingsTitle" aria-modal="true" class="modal hidden" id="settingsModal" role="dialog">
<div class="modalFrame">
<div class="modalHeader">
<div class="modalTitle" data-i18n="settingsTitle" id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
<button aria-label="Close" class="iconBtn small" id="settingsClose">‚úñÔ∏è</button>
</div>
<div class="modalBody">
<div class="infoContent" id="settingsContent">
<!-- Mode toggle -->
<h3 class="backupTitle" data-i18n="modeSelection" style="text-align:left">–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞</h3>
<div id="modeToggleWrap">
<label class="switchLabel">
<span data-i18n="modeNormal">–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º</span>
<label class="switch">
<input id="modeToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span data-i18n="modeHard">–°–ª–æ–∂–Ω—ã–π —Ä–µ–∂–∏–º</span>
</label>
</div>
<div class="sectionDivider"></div>
<div id="backupSection">
<h3 class="settingsSubtitle" data-i18n="backupTitle" style="text-align:left">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
<div class="btnRow">
<button class="btn" data-i18n="backupExport" id="btnBackupExport">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
<button class="btn" data-i18n="backupImport" id="btnBackupImport">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function(){
  try {
    var e = document.getElementById('btnBackupExport');
    var i = document.getElementById('btnBackupImport');
    if (e && window.App && App.Backup) e.addEventListener('click', function(){ App.Backup.export(); });
    if (i && window.App && App.Backup) i.addEventListener('click', function(){ App.Backup.import(); });
  } catch(_) {}
});
</script>
</div>
</div>
<div class="modalActions center">
<button class="btn primary" data-i18n="ok" id="settingsOk">OK</button>
</div>
</div>
</div>
<!-- Donate modal (same structure as Settings) -->
<div aria-labelledby="donateTitle" aria-modal="true" class="modal hidden" id="donateModal" role="dialog">
<div class="modalFrame">
<div class="modalHeader">
<div class="modalTitle" data-i18n="donateTitle" id="donateTitle">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</div>
<button aria-label="Close" class="iconBtn small" id="donateClose">‚úñÔ∏è</button>
</div>
<div class="modalBody">
<div class="infoContent center" id="donateContent">
<div class="mt-20" id="donate-button-container">
<div id="donate-button"></div>
<script charset="UTF-8" src="https://www.paypalobjects.com/donate/sdk/donate-sdk.js"></script>
<script>
      PayPal.Donation.Button({
        env:'production',
        hosted_button_id:'KFBR8BW5ZZTQ4',
        image: {
          src:'https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif',
          alt:'Donate with PayPal button',
          title:'PayPal - The safer, easier way to pay online!'
        }
      }).render('#donate-button');
    </script>
</div>
</div>
</div>
<div class="modalActions center">
<button class="btn primary" data-i18n="ok" id="donateOk">OK</button>
</div>
</div>
</div>
<div aria-labelledby="infoTitle" aria-modal="true" class="modal hidden" id="infoModal" role="dialog">
<div class="modalFrame">
<div class="modalHeader">
<div class="modalTitle" id="infoTitle">Info</div>
<button aria-label="Close" class="iconBtn small" id="infoClose">‚úñÔ∏è</button>
</div>
<div class="modalBody">
<div class="infoContent" id="infoContent"></div>
</div>
<div class="modalActions center">
<button class="primary" id="infoOk">OK</button>
</div>
</div>
</div>
</main>
<!-- Dicts modal -->
<div aria-labelledby="modalTitle" aria-modal="true" class="modal hidden" id="modal" role="dialog">
<div class="backdrop" id="backdrop"></div>
<div class="dialog">
<!-- –®–∞–ø–∫–∞ -->
<div class="modalHeader">
<h2 class="modalTitle" id="modalTitle">–°–ª–æ–≤–∞—Ä–∏</h2>
<button aria-label="Close" class="iconBtn small" id="modalClose">‚úñÔ∏è</button>
</div>
<!-- –¢–µ–ª–æ -->
<div class="modalBody">
<div class="flagsRow flex-center gap-10 m-10" id="langFlags"></div>
<div class="sectionDivider"></div>
<div class="field">
<div class="dictList" id="dictList"></div>
</div>
</div>
<!-- –§—É—Ç–µ—Ä -->
<div class="modalActions center">
<button class="primary" id="okBtn">OK</button>
</div>
</div>
</div>
<script src="i18n.js?v=1.0"></script>
<script src="dicts.js?v=1.0"></script>
<script src="deck.de.js?v=1.0"></script>
<script src="deck.en.js?v=1.0"></script>
<script src="app.core.js?v=1.0"></script>
<script src="app.decks.js?v=1.0"></script>
<script src="theme.js?v=1.0"></script>
<script src="app.trainer.js?v=1.0"></script>
<script src="app.mistakes.js?v=1.0"></script>
<script src="app.favorites.js?v=1.0"></script>
<script src="app.ui.view.js?v=1.0"></script>
<script src="ui.options.safe.js?v=1.0"></script>
<script src="ui.setup.modal.js?v=1.0"></script>
<script src="ui.bus.js?v=1.0"></script>
<script src="ui.state.js?v=1.0"></script>
<script src="ui.sets.js?v=1.0"></script>
<script src="ui.progress.scope.js?v=1.0"></script>
<script src="ui.stats.core.js?v=1.0"></script>
<script src="app.backup.js?v=1.0"></script>
<script src="ui.lifecycle.js?v=1.0"></script>
<script src="ui.sets.done.js?v=1.0"></script>
<script src="ui.fix.js?v=1.0"></script>
<!-- --------------------------  –ö –û –ù –ï –¶  --------------------------- -->
<script>
(function(){
  function hydrateI18N(){
    try{
      var App = window.App || {};
      var bag = (App.i18n && App.i18n()) || (window.I18N && (window.I18N[(App.settings&&App.settings.lang)||'uk'] || window.I18N.uk)) || {};
      document.querySelectorAll('[data-i18n]').forEach(function(el){
        var key = el.getAttribute('data-i18n');
        if (bag && bag[key]) el.textContent = bag[key];
      });
      document.querySelectorAll('[data-i18n-title]').forEach(function(el){
        var key = el.getAttribute('data-i18n-title');
        if (bag && bag[key]) el.setAttribute('title', bag[key]);
      });
      document.querySelectorAll('[data-i18n-aria]').forEach(function(el){
        var key = el.getAttribute('data-i18n-aria');
        if (bag && bag[key]) el.setAttribute('aria-label', bag[key]);
      });
    }catch(e){/*noop*/}
  }
  window.hydrateI18N = hydrateI18N;
  document.addEventListener('DOMContentLoaded', hydrateI18N);
  document.addEventListener('i18n:lang-changed', hydrateI18N);
})();
</script>
<!-- Unified Confirm Modal -->
<div aria-describedby="confirmText" aria-labelledby="confirmTitle" aria-modal="true" class="modal confirmModal hidden" id="confirmModal" role="dialog">
<div class="modalFrame">
<div class="modalHeader">
<div class="modalTitle" id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
<button aria-label="Close" class="iconBtn small" id="confirmClose">‚úñÔ∏è</button>
</div>
<div class="modalBody">
<div class="infoContent" id="confirmText">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</div>
</div>
<div class="modalActions center">
<button class="btn primary" id="confirmOk">OK</button>
<button class="btn" id="confirmCancel">–û—Ç–º–µ–Ω–∞</button>
</div>
</div>
</div>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('./sw.js?v=1.0').catch(function(e){ console.warn('SW registration failed', e); });
    });
  }
  </script>
<script src="app.spoiler.bootstrap.js?v=1.0"></script>
<script>
(function(){
  function detectLang(){
    try{
      var u = localStorage.getItem('lang') || localStorage.getItem('language') || localStorage.getItem('appLang');
      if(!u){
        if (navigator.languages && navigator.languages.length) u = navigator.languages[0];
        else u = navigator.language || (document.documentElement.getAttribute('lang')||'');
      }
      u = (u||'en').toLowerCase();
      if(u.startsWith('ru')) return 'ru';
      if(u.startsWith('uk') || u.startsWith('ua')) return 'uk';
      return 'en';
    }catch(e){ return 'en'; }
  }

  var lang = detectLang();
  var hrefMap = {
    privacy: './privacy.'+lang+'.html',
    terms: './terms.'+lang+'.html',
    impressum: './impressum.'+lang+'.html'
  };
  var labelMap = {
    en: { privacy:'Privacy Policy', terms:'Terms of Use', impressum:'Legal Notice' },
    ru: { privacy:'–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏', terms:'–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è', impressum:'–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' },
    uk: { privacy:'–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ', terms:'–£–º–æ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è', impressum:'–Æ—Ä–∏–¥–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è' }
  };
  document.querySelectorAll('.footer-links a[data-legal]').forEach(function(a){
    var key = a.getAttribute('data-legal');
    if(hrefMap[key]) a.setAttribute('href', hrefMap[key]);
    if(labelMap[lang] && labelMap[lang][key]) a.textContent = labelMap[lang][key];
  });
})();
</script>
<div id="footer-placeholder"></div>

<script>
(function(){
  function normalizeLang(v){
    v = String(v||'').toLowerCase();
    if (v.startsWith('ru')) return 'ru';
    if (v.startsWith('uk') || v.startsWith('ua')) return 'uk';
    return 'en';
  }
  function uiLang(){
    try{
      var lang = (window.App && App.settings && App.settings.lang) || localStorage.getItem('lexitron.uiLang') || navigator.language || 'en';
      return normalizeLang(lang);
    }catch(e){ return 'en'; }
  }
  var LABELS = {
    en:{privacy:'Privacy Policy',terms:'Terms of Use',impressum:'Legal Notice'},
    ru:{privacy:'–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',terms:'–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è',impressum:'–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'},
    uk:{privacy:'–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ',terms:'–£–º–æ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è',impressum:'–Æ—Ä–∏–¥–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è'}
  };
  function applyFooterI18n(root){
    var lang = uiLang();
    (root || document).querySelectorAll('.site-footer [data-legal]').forEach(function(a){
      var k = a.getAttribute('data-legal');
      a.href = './'+k+'.'+lang+'.html';
      a.textContent = (LABELS[lang] && LABELS[lang][k]) || (LABELS.en[k] || k);
      a.setAttribute('hreflang', lang);
    });
  }
  function injectFooter(){
    fetch('./footer_snippet.html', {cache: 'no-store'})
      .then(function(r){ return r.text(); })
      .then(function(html){
        var ph = document.getElementById('footer-placeholder');
        if (!ph) {
          ph = document.createElement('div');
          ph.id = 'footer-placeholder';
          document.body.appendChild(ph);
        }
        ph.innerHTML = html;
        applyFooterI18n(ph);
      })
      .catch(function(e){ console.error('Footer load failed:', e); });
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', injectFooter);
  } else {
    injectFooter();
  }
  window.addEventListener('lexi:lang-changed', function(){ applyFooterI18n(); });
})();
</script>
<script>
// Live i18n runtime: call setUiLang('en'|'ru'|'uk') to switch instantly
(function(){
  function normalizeLang(v){
    v = String(v||'').toLowerCase();
    if (v.startsWith('ru')) return 'ru';
    if (v.startsWith('uk') || v.startsWith('ua')) return 'uk';
    return 'en';
  }

  // storage sync across tabs
  window.addEventListener('storage', function(ev){
    if (ev.key === 'lexitron.uiLang' && ev.newValue){
      try {
        var lang = normalizeLang(ev.newValue);
        if (window.App && App.settings) {
          try {
            App.settings.lang = lang; // if patched setter exists it will dispatch
          } catch (_) {}
        }
        window.dispatchEvent(new CustomEvent('lexi:lang-changed', {detail:{lang: lang}}));
      } catch(e){ console.error(e); }
    }
  });

  // Expose simple API
  window.setUiLang = function(lang){
    try {
      lang = normalizeLang(lang);
      // persist
      try { localStorage.setItem('lexitron.uiLang', lang); } catch(_){}
      // update App.settings.lang if available
      if (window.App && App.settings) {
        try { App.settings.lang = lang; } catch(_){}
      }
      // notify listeners (footer, headers, etc.)
      window.dispatchEvent(new CustomEvent('lexi:lang-changed', {detail:{lang: lang}}));
    } catch(e){ console.error(e); }
  };

  // Optional: patch App.settings.lang to auto-dispatch when changed by other code
  try {
    if (window.App && App.settings && !Object.getOwnPropertyDescriptor(App.settings,'lang').set) {
      var _lang = (App.settings.lang || localStorage.getItem('lexitron.uiLang') || navigator.language || 'en');
      _lang = normalizeLang(_lang);
      Object.defineProperty(App.settings, 'lang', {
        get: function(){ return _lang; },
        set: function(v){
          _lang = normalizeLang(v);
          try { localStorage.setItem('lexitron.uiLang', _lang); } catch(_){}
          window.dispatchEvent(new CustomEvent('lexi:lang-changed', {detail:{lang: _lang}}));
        }
      });
    }
  } catch(e){ /* ignore */ }
})();
</script>
</body>
</html>
<!-- ====================== End of file =======================
  File: index.html ‚Ä¢ Version: 1.0 ‚Ä¢ 2025-10-19
-->
